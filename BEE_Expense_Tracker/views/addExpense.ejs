<!DOCTYPE html>
<html>
<head>
    <title>Add Expense</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <header>
        <nav>
            <a href="/expenses" class="btn">Home</a>
            <a href="/categories" class="btn">Categories</a>
            <a href="/groups" class="btn">Groups</a>
            <a href="/profile" class="btn">Profile</a>
            <a href="/logout" class="btn">Logout</a>
        </nav>
    </header>

    <div class="container">
        <h1>Add Expense</h1>

        <form action="/expenses/add" method="POST">

            <!-- Title -->
            <input type="text" name="title" placeholder="Expense Title" required>

            <!-- Amount -->
            <input type="number" name="amount" placeholder="Amount" step="0.01" required>

            <!-- Date -->
            <input type="date" name="date" required>

            <!-- Category -->
            <label for="category"></label>
            <select name="category" id="category" required>
                <option value="" disabled selected>-- Select a Category --</option>
                <% categories.forEach(cat => { %>
                    <option value="<%= cat._id %>"><%= cat.name %></option>
                <% }) %>
            </select>

            <!-- NEW: GROUP DROPDOWN -->
            <label for="groupId"></label>
            <select name="groupId" id="groupId">
                <option value="">Personal Expense (No Group)</option>

                <% groups.forEach(g => { %>
                    <option value="<%= g._id %>" 
                        <%= selectedGroup == g._id ? "selected" : "" %>>
                        <%= g.name %>
                    </option>
                <% }) %>
            </select>

            <!-- Submit -->
            <button type="submit">Add Expense</button>
        </form>

        <br>
        <a href="/expenses" class="btn">Back to Expenses</a>
    </div>
</body>
</html>
